<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:replace="common/header :: headerFragment"/>
  <title>ììœ ê²Œì‹œíŒ - ëª©ë¡</title>
  <th:block th:replace="common/bootstrap :: bootstrapFragment"/>
</head>
<body>
<div class="container-fluid">
  <h1>ììœ ê²Œì‹œíŒ - ëª©ë¡</h1>
  <form method="get" action="list.do">
    <div class="row border align-content-center p-2">
      <div class="col-1 align-self-center">
        ë“±ë¡ì¼
      </div>
      <div class="col-2">
        <input type="date" class="form-control" name="startDate" value="${searchManager.startDate}">
      </div>
      <div class="col-1 align-self-center text-center">
        ~
      </div>
      <div class="col-2">
        <input type="date" class="form-control" name="endDate" value="${searchManager.endDate}">
      </div>
      <div class="col-2">
        <select class="form-control" name="categoryId">
          <option value="">ì¹´í…Œê³ ë¦¬</option>

          <th:block th:each="categoryDTO:${categoryList}">
            <option th:value="${categoryDTO.categoryId}"
                    th:text="${categoryDTO.name}"
                    th:selected="${categoryDTO.categoryId} == ${searchManager.categoryId}"></option>
          </th:block>
        </select>
      </div>
      <div class="col-2">
        <input type="text" class="form-control" name="searchWord"
               placeholder="ê²€ìƒ‰ì–´ ì…ë ¥(ì œëª©+ì‘ì„±ì+ë‚´ìš©)"
               th:value="${not #strings.isEmpty(searchManager.searchWord) ? searchManager.searchWord : ''}">
      </div>
      <div class="col-2">
        <input type="hidden" name="pageNum" value="1">
        <input type="submit" class="btn btn-primary" value="ê²€ìƒ‰">
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        ì´ [[${pageDTO.totalCount}]]ê±´
      </div>
    </div>
    <div class="row">
      <div class="col-12">

        <table class="table">
          <thead>
          <tr>
            <td>ì¹´í…Œê³ ë¦¬</td>
            <td>ì œëª©</td>
            <td>ì‘ì„±ì</td>
            <td>ì¡°íšŒìˆ˜</td>
            <td>ë“±ë¡ ì¼ì‹œ</td>
            <td>ìˆ˜ì • ì¼ì‹œ</td>
          </tr>
          </thead>

          <tbody th:if="${#lists.isEmpty(articleList)}">
          <tr>
            <td colspan="6">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
          </tr>
          </tbody>
          <tbody>
          <tr th:each="articleDTO: ${articleList}">
            <td>
              [[${articleDTO.categoryName}]]
            </td>
            <td>
              <a th:href="|view.do?articleId=${articleDTO.articleId}${searchManager.searchParamsQuery}|"
                 th:text="${@validationChecker.SubStringWithSkipMark(articleDTO.title, 80)}">

              </a>
              <span>
                                    [[${(articleDTO.isFileExist) ? "ğŸ“" : ""}]]
                </span>
            </td>
            <td>[[${articleDTO.writer}]]
            </td>
            <td>[[${articleDTO.viewCount}]]
            </td>
            <td>[[${(articleDTO.isCreatedDateValid()) ? articleDTO.createdDate
              : "-" }]]
            </td>
            <td>[[${(articleDTO.isModifiedDateValid()) ? articleDTO.modifiedDate
              : "-"}]]
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <th:block th:replace="common/paging :: pagingFragment(${pageDTO}, ${searchManager})">

    </th:block>
    <div class="row">
      <div class="col-12 d-flex justify-content-end">
        <input type="button" class="btn btn-primary" value="ê¸€ì“°ê¸°"
               onclick="location.href='write.do?${searchManager.searchParamsQuery}'">
      </div>
    </div>
  </form>
</div>
</body>
</html>
